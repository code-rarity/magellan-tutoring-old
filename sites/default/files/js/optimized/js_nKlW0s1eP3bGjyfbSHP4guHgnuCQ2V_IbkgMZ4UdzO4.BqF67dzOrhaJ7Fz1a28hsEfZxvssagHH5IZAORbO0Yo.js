/* Source and licensing information for the line(s) below can be found at http://www.magellantutoring.com/core/misc/tabbingmanager.js. */
(function(t,e){function a(){this.stack=[]};function i(e){t.extend(this,{level:null,$tabbableElements:t(),$disabledElements:t(),released:!1,active:!1},e)};t.extend(a.prototype,{constrain:function(e){var s=this.stack.length;for(var n=0;n<s;n++){this.stack[n].deactivate()};var r=t(e).find(':tabbable').addBack(':tabbable'),a=new i({level:this.stack.length,$tabbableElements:r});this.stack.push(a);a.activate();t(document).trigger('drupalTabbingConstrained',a);return a},release:function(){var t=this.stack.length-1;while(t>=0&&this.stack[t].released){t--};this.stack.splice(t+1);if(t>=0){this.stack[t].activate()}},activate:function(e){var r=e.$tabbableElements,d=e.level,a=t(':tabbable').not(r);e.$disabledElements=a;var s=a.length;for(var n=0;n<s;n++){this.recordTabindex(a.eq(n),d)};a.prop('tabindex',-1).prop('autofocus',!1);var i=r.filter('[autofocus]').eq(-1);if(i.length===0){i=r.eq(0)};i.trigger('focus')},deactivate:function(t){var a=t.$disabledElements,i=t.level,n=a.length;for(var e=0;e<n;e++){this.restoreTabindex(a.eq(e),i)}},recordTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices')||{};a[e]={tabindex:t[0].getAttribute('tabindex'),autofocus:t[0].hasAttribute('autofocus')};t.data('drupalOriginalTabIndices',a)},restoreTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices');if(a&&a[e]){var n=a[e];if(n.tabindex){t[0].setAttribute('tabindex',n.tabindex)}
else{t[0].removeAttribute('tabindex')};if(n.autofocus){t[0].setAttribute('autofocus','autofocus')};if(e===0){t.removeData('drupalOriginalTabIndices')}
else{var i=e;while(a.hasOwnProperty(i)){delete a[i];i++};t.data('drupalOriginalTabIndices',a)}}}});t.extend(i.prototype,{release:function(){if(!this.released){this.deactivate();this.released=!0;e.tabbingManager.release(this);t(document).trigger('drupalTabbingContextReleased',this)}},activate:function(){if(!this.active&&!this.released){this.active=!0;e.tabbingManager.activate(this);t(document).trigger('drupalTabbingContextActivated',this)}},deactivate:function(){if(this.active){this.active=!1;e.tabbingManager.deactivate(this);t(document).trigger('drupalTabbingContextDeactivated',this)}}});if(e.tabbingManager){return};e.tabbingManager=new a()})(jQuery,Drupal);
/* Source and licensing information for the above line(s) can be found at http://www.magellantutoring.com/core/misc/tabbingmanager.js. */