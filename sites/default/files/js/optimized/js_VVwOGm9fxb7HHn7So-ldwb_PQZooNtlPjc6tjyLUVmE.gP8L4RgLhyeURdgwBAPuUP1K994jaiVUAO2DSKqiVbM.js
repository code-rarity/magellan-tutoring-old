/* Source and licensing information for the line(s) below can be found at http://www.magellantutoring.com/core/modules/editor/js/editor.formattedTextEditor.js. */
(function(e,t,i,a){t.quickedit.editors.editor=t.quickedit.EditorView.extend({textFormat:null,textFormatHasTransformations:null,textEditor:null,$textElement:null,initialize:function(e){t.quickedit.EditorView.prototype.initialize.call(this,e);var r=t.quickedit.metadata.get(this.fieldModel.get('fieldID'),'custom');this.textFormat=i.editor.formats[r.format];this.textFormatHasTransformations=r.formatHasTransformations;this.textEditor=t.editors[this.textFormat.editor];var a=this.$el.find('.quickedit-field');if(a.length){this.$textElement=a.eq(0)}
else{this.$textElement=this.$el};this.model.set('originalValue',this.$textElement.html())},getEditedElement:function(){return this.$textElement},stateChange:function(t,i){var n=this.model,e=t.previous('state'),l=i;switch(l){case'inactive':break;case'candidate':if(e!=='inactive'&&e!=='highlighted'){this.textEditor.detach(this.$textElement.get(0),this.textFormat)};if(e==='active'&&this.textFormatHasTransformations){this.revert()};if(e==='invalid'){this.removeValidationErrors()};break;case'highlighted':break;case'activating':if(this.textFormatHasTransformations){var o=this.$textElement;this._getUntransformedText(function(e){o.html(e);t.set('state','active')})}
else{a.defer(function(){t.set('state','active')})};break;case'active':{var r=this.$textElement.get(0),s=t.toolbarView;this.textEditor.attachInlineEditor(r,this.textFormat,s.getMainWysiwygToolgroupId(),s.getFloatedWysiwygToolgroupId());this.textEditor.onChange(r,function(e){n.set('currentValue',e);t.set('state','changed')});break};case'changed':break;case'saving':if(e==='invalid'){this.removeValidationErrors()};this.save();break;case'saved':break;case'invalid':this.showValidationErrors();break}},getQuickEditUISettings:function(){return{padding:!0,unifiedToolbar:!0,fullWidthToolbar:!0,popup:!1}},revert:function(){this.$textElement.html(this.model.get('originalValue'))},_getUntransformedText:function(e){var a=this.fieldModel.get('fieldID'),i=t.ajax({url:t.quickedit.util.buildUrl(a,t.url('editor/!entity_type/!id/!field_name/!langcode/!view_mode')),submit:{nocssjs:!0}});i.commands.editorGetUntransformedText=function(t,i,a){e(i.data)};i.execute()}})})(jQuery,Drupal,drupalSettings,_);
/* Source and licensing information for the above line(s) can be found at http://www.magellantutoring.com/core/modules/editor/js/editor.formattedTextEditor.js. */